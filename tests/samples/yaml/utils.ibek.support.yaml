################################################################################
### ibek support YAML to demonstrate use of __utils__ global context
################################################################################

module: epics
defs:
  - name: InterruptVectorVME
    description: |
      Reserve an interrupt vector for use with VME hardware.
    args:
      - type: id
        name: name
        description: A name for an interrupt vector variable

    env_vars:
      - name: "{{ name }}"
        value: '{{  __utils__.counter("InterruptVector", start=192, stop=255) }}'

  - name: InterruptVectorVME2
    description: naughty second use of same counter
    args:
      - type: id
        name: name
        description: A name for an interrupt vector variable

    env_vars:
      - name: "second_{{ name }}"
        value: '{{  __utils__.counter("InterruptVector", start=193, stop=194) }}'
